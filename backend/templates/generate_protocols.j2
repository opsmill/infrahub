# Generated by "invoke backend.generate", do not edit directly

from __future__ import annotations

from typing import TYPE_CHECKING, Protocol, runtime_checkable

if TYPE_CHECKING:
    from enum import Enum
    from infrahub.core.attribute import Boolean, Dropdown, HashedPassword, Integer, IPHost, IPNetwork, JSONAttribute, ListAttribute, String, URL
    from infrahub.core.relationship import RelationshipManager


{% for generic in generics %}
{%- if generic.namespace == 'Core' and generic.name == 'Node' %}
class CoreNode(Protocol):
    id: str

    def get_id(self) -> str: ...
    def get_kind(self) -> str: ...
    async def save(self) -> None: ...
{%- else %}
class {{ generic.namespace }}{{ generic.name }}(CoreNode):
    {%- if not generic.attributes|default([]) and not generic.relationships|default([]) %}
    pass
    {%- endif %}
    {%- for attribute in generic.attributes|default([]) %}
    {{ attribute | render_attribute }}
    {%- endfor %}
    {%- for relationship in generic.relationships|default([]) %}
    {{ relationship.name }}: RelationshipManager
    {%- endfor %}
    {%- if generic.hierarchical | default(false) %}
    parent: RelationshipManager
    children: RelationshipManager
    {%- endif %}
{%- endif %}
{% endfor %}

{% for model in models %}
    {%- if model.inherit_from|default %}
class {{ model.namespace }}{{ model.name }}({{ model.inherit_from|join(', ') }}):
    {%- else %}
class {{ model.namespace }}{{ model.name }}(CoreNode):
    {%- endif %}
    {%- if not model.attributes|default([]) and not model.relationships|default([]) %}
    pass
    {%- endif %}
    {%- for attribute in model.attributes|default([]) %}
    {{ attribute | render_attribute }}
    {%- endfor %}
    {%- for relationship in model.relationships|default([]) %}
    {{ relationship.name }}: RelationshipManager
    {%- endfor %}
    {%- if model.hierarchical | default(false) %}
    parent:  RelationshipManager
    children: RelationshipManager
    {%- endif %}
{% endfor %}