{
    "name": "INFRAHUB CodeSpace Configuration",
    "image": "mcr.microsoft.com/vscode/devcontainers/python:3.11",
    // Configure tool-specific properties.
	"customizations": {
		// Configure properties specific to VS Code.
		"vscode": {
			"settings": {
                "python.pythonPath": "/usr/bin/python3",
                "terminal.integrated.shell.linux": "/bin/bash",
                "python.venvPath": "/workspace/.venv",
                "python.linting.enabled": true
              },
			"extensions": [
                "pomdtr.excalidraw-editor",
                "wholroyd.jinja",
                "ms-python.vscode-pylance",
                "shardulm94.trailing-spaces",
                "nickmillerdev.pytest-fixtures",
                "yzhang.markdown-all-in-one",
                "GraphQL.vscode-graphql-syntax"
            ]
		}
	},
    "runArgs": ["-u", "/bin/bash"],
    "runCommand": "poetry run invoke demo.destroy demo.init demo.start demo.load-infra-schema demo.load-infra-data",
    "forwardPorts": [8000], // 7474, 7687, 15672, 5672
    "remoteUser": "infrahub",
    "remoteEnv": {
      "INFRAHUB_SDK_API_TOKEN": "06438eb2-8019-4776-878c-0941b1f1d1ec"
    },
    "postCreateCommand": "bash -c 'cd /workspace/infrahub && pyenv install 3.11 --skip-existing && pyenv local 3.11 && pip install toml invoke && curl -sSL https://install.python-poetry.org | python3 - && poetry config virtualenvs.create false && poetry install && poetry run invoke demo.build'",
    "features": {
		"docker-in-docker": "latest",
		"github-cli": "latest"
	},
    "hostRequirements": {
		"memory": "2gb"
	}
  }